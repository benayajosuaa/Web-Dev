### unknown

# ðŸ“˜Â Routing & Endpoint Handling

Routing dalam backend adalah cara server **memetakan sebuah URL (path)** dan metode HTTP (GET, POST, PUT, DELETE, dll) ke sebuah **fungsi handler**. ****Handler ini yang akan menentukan apa yang dikembalikan ke client

ðŸ‘‰ Bisa dianalogikan kayak resepsionis kantor:

- Orang datang (request) â†’ tunjukkan tujuan ruangan (endpoint)
- Resepsionis arahkan ke orang yang tepat (handler)
- Orang itu yang kasih jawaban (response)

<br/>

## http Methode (CRUD)

Umumnya routing disusun mengikuti **CRUD operation**:

- **GET** â†’ mengambil data (Read)
- **POST** â†’ menambah data baru (Create)
- **PUT / PATCH** â†’ mengubah data (Update)
- **DELETE** â†’ menghapus data (Delete)

contoh implementasi nya dengan resource **`/user`**

| Method | Contoh Endpoint | Kegunaan |
| --- | --- | --- |
| GET | `/users` | Ambil semua user |
| GET | `/users/:id` | Ambil user tertentu |
| POST | `/users` | Tambah user baru |
| PUT | `/users/:id` | Update user tertentu |
| DELETE | `/users/:id` | Hapus user tertentu |

<br/>

## endpoint parameters

Endpoint parameter ini intinya adalah **cara kita mengirim data tambahan ke server melalui URL**

Ada dua jenis yang sering dipakai: 

1. **Path Params**
    - Path params adalah bagian dari **URL itu sendiri**
    - Biasanya dipakai untuk mengidentifikasi **resource tertentu** (misalnya user dengan id tertentu, produk dengan id tertentu)
    - Ditulis dengan tanda `:` saat mendefinisikan route di server
    
    contoh : 
    
    ```
    GET /users/123
    ```
    
    - `/users/:id` â†’ `:id` adalah placeholder (variabel dalam URL).
    - `123` adalah **nilai nyata** yang dikirim client
    
    **Impelementasi Sederhanannya :**
    
    ```jsx
    app.get("/users/:id", (req, res) => {
      const userId = req.params.id; // ambil nilai "123"
      res.send(`Kamu minta data user dengan ID: ${userId}`);
    });
    ```
    
    Kalau buka `http://localhost:3000/users/123`
    
    Output = `"Kamu minta data user dengan ID: 123"`
    
    **Kapan dipakai?**
    
    - Kalau kamu butuh **akses ke 1 resource spesifik**.
    - Contoh:
        - `/products/45` â†’ detail produk ke-45
        - `/articles/2025` â†’ artikel tahun 2025
        - `/students/benaya` â†’ data student bernama benaya

<br/>
    
2. **Query Params**
    - Query params adalah data tambahan yang dikirim setelah tanda **`?`** di URL.
    - Biasanya dipakai untuk **filtering, sorting, atau pencarian**.
    - Format: `?key=value`
    - Bisa lebih dari satu: `?key1=value1&key2=value2`
    
    contoh :
    
    ```
    GET /search?q=benaya
    ```
    
    - `q` adalah nama parameter
    - `benaya` adalah nilainya
    
    **Impelementasi Sederhanannya :**
    
    ```jsx
    app.get("/search", (req, res) => {
      const query = req.query.q; // ambil nilai "benaya"
      res.send(`Hasil pencarian untuk: ${query}`);
    });
    ```
    
    Kalau buka `http://localhost:3000/search?q=benaya`
    
    Output = `"Hasil pencarian untuk: benaya"`
    
    **Impelementasi Sederhanannya Lainnya :**
    
    ```
    GET /search?q=benaya&sort=desc&page=2
    ```
    
    ```jsx
    app.get("/search", (req, res) => {
      const { q, sort, page } = req.query;
      res.send(`Cari: ${q}, Urutkan: ${sort}, Halaman: ${page}`);
    });
    
    ```
    
    Output = `"Cari: benaya, Urutkan: desc, Halaman: 2"`
    
    **summary perbandingannya :**
    
    | Fitur | Path Params (`:id`) | Query Params (`?key=value`) |
    | --- | --- | --- |
    | Posisi | Bagian dari path URL | Setelah tanda `?` |
    | Tujuan | Identifikasi **satu resource spesifik** | Filtering, searching, sorting, dll |
    | Jumlah | Biasanya 1â€“2 variabel | Bisa banyak, fleksibel |
    | Contoh URL | `/users/123` | `/search?q=benaya&sort=desc&page=2` |

<br/>

## Contoh Routing Sederhana

```jsx
import express from "express";
const app = express();
app.use(express.json()); // agar bisa baca JSON body

// Route GET - ambil semua user
app.get("/users", (req, res) => {
  res.send("Daftar semua user");
});

// Route GET dengan parameter (path parameter)
app.get("/users/:id", (req, res) => {
  const userId = req.params.id;
  res.send(`Detail user dengan ID: ${userId}`);
});

// Route POST - tambah user baru
app.post("/users", (req, res) => {
  const newUser = req.body; // ambil data dari body
  res.status(201).send({ message: "User ditambahkan", data: newUser });
});

// Route PUT - update user
app.put("/users/:id", (req, res) => {
  const userId = req.params.id;
  const updatedUser = req.body;
  res.send({ message: `User ${userId} diupdate`, data: updatedUser });
});

// Route DELETE - hapus user
app.delete("/users/:id", (req, res) => {
  const userId = req.params.id;
  res.send({ message: `User ${userId} dihapus` });
});

// Jalankan server
app.listen(3000, () => {
  console.log("Server running on http://localhost:3000");
});

```
